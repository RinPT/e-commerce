//// -- LEVEL 1
//// -- Tables and References

// Creating tables
Table users {
  uid int [pk, increment]
  name varchar(32)
  surname varchar(64)
  username varchar(64) [unique]
  email varchar(96) [unique]
  password varchar(64)
  status tinyint(1)
  user_group int
  ip_address varchar(40)
  created_at timestamp
  updated_at timestamp
}

Table user_address {
  aid int [pk, increment]
  uid int [not null, unique]
  name varchar(32)
  surname varchar(64)
  user_type enum
  company varchar(64)
  tax_no varchar(128)
  country_id int [not null]
  city varchar(255)
  address varchar(255)
  address_type varchar(32)
  postcode varchar(255)
  telephone varchar(32)
  created_at timestamp
  updated_at timestamp
}

Ref: "users"."uid" < "user_address"."uid"

Table countries {
  cid int [pk, increment]
  name varchar(255)
  iso_code varchar(2)
  status tinyint(1)
}

Ref: "countries"."cid" < "user_address"."country_id"

Table user_groups {
  gid int [pk, increment]
  name varchar(32)
  permissions longtext
  created_at timestamp
  updated_at timestamp
}

Table user_perms {
  perm_id int [pk, increment]
  perm_name varchar(32)
  created_at timestamp
  updated_at timestamp
}

Ref: "user_groups"."gid" < "users"."user_group"

Table products {
  product_id int [pk,increment]
  owner_id int [not null, unique]
  product_name varchar(32)
  product_category int 
  product_description longtext
  product_price int
  product_stock int
  created_at timestamp
  updated_at timestamp

  }

Ref: "users"."uid" < "products"."owner_id"

Table discounts {
  discount_id int [not null]
  discount_name varchar(32)
  discount_code varchar(20) [not null]
  discount_amount decimal(15,4) [not null]
  created_at timestamp
  updated_at timestamp
  start_date date [not null]
  end_date date [not null]
}

Table order {
  order_id int [pk,increment]
  product_id int [not null, unique]
  uid int [not null, unique]
  shipping_id int [not null, unique]
  discount_id int
  order_amount int 
  payment_method int
  payment_bank varchar(20)
  created_at timestamp
  updated_at timestamp
}

Ref: "products"."product_id" < "order"."product_id"
Ref: "users"."uid" < "order"."uid"
Ref: "shipping_details"."shipping_id" < "order"."shipping_id"
Ref: "discounts"."discount_id" < "order"."discount_id"

Table shipping_details{
  shipping_id int [pk, increment]
  address_id int [not null]
  order_id int [not null,unique]
  delivery_type int
  shipping_status int
}

Ref: "order"."order_id" < "shipping_details"."order_id"
Ref: "user_address"."aid" < "shipping_details"."address_id"


Table comments {
  comment_id bigint [pk, increment]
  product_id bigint [not null, unique]
  user_id bigint [not null, unique]
  body text
  created_at timestamp
  updated_at timestamp
}

Ref: users.uid < comments.user_id
Ref: products.product_id < comments.product_id

Table advertisements {
  ad_id bigint [pk, increment]
  banner text
  description text
  category text
  created_at timestamp
  updated_at timestamp
}

Table log {
  log_id int [pk, increment]
  log_date timestamp
  total_profit bigint
  new_orders int
  total_views int
  new_registrations int
  new_products int
  new_contact_messages int
  new_questions int
  new_comments int
  
}

Table tickets {
  ticket_id int [pk, increment]
  ticket_creation_date timestamp
  user_id int //id of person who made the support request
  support_id int //id of person who will take care of the request
  status tinyint //awaiting reply or complete etc
}

Table ticket_messages {
  message_id int [pk, increment]
  related_ticket int
  message_date timestamp
  user_id int //whoevers id the message belongs to
  content text
}

Ref: "users"."uid" < "tickets"."user_id"

Ref: "users"."uid" < "tickets"."support_id"

Ref: "users"."uid" < "ticket_messages"."user_id"

Ref: "tickets"."ticket_id" < "ticket_messages"."related_ticket"

Table categories {
  category_id int [pk, increment]
  name string
  description text
  meta_title string
  meta_keyword string
  meta_description text
  image text
  parent_id int 
  sort_order int
  status tinyint
  created_at timestamp
  updated_at timestamp
}

Table store {
  store_id int [pk, increment]
  name string
  url string
  created_at timestamp
}

Table config {
  config_id int [pk,increment]
  key string
  value string
}